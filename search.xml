<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>域名信息收集原理探究</title>
      <link href="/posts/669f2d46.html"/>
      <url>/posts/669f2d46.html</url>
      
        <content type="html"><![CDATA[<hr><p>学习域名收集的原理，不断总结，活到老学到老~</p><span id="more"></span><h2 id="证书透明度收集子域名"><a href="#证书透明度收集子域名" class="headerlink" title="证书透明度收集子域名"></a>证书透明度收集子域名</h2><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>可以把互联网上的网站（比如 <code>baidu.com</code>）想象成一个个商店。为了让顾客安全地访问，这些商店需要一个“安全营业执照”——这就是我们说的 <strong>SSL&#x2F;TLS 证书</strong>。</p><p>为了防止有人偷偷开个假店（比如 <code>fake-baidu.com</code>）国际上规定：所有正规颁发的“营业执照”（证书），都必须登记在一个或多个<strong>公开的登记本</strong>里，谁都可以查！</p><p>这个“公开的登记本”，就是 <strong>证书透明度日志（Certificate Transparency Log，简称 CT Log）</strong>。</p><p>每当百度给 <code>map.baidu.com</code> 这个地图服务申请一个“安全执照”时，就必须把这个证书写进公开的“登记本”里。证书透明度就像是一个“证书公开花名册”，我们通过翻这个花名册，就能知道一个公司（网站）底下有多少个“小部门”（子域），哪怕它们平时藏得很深。</p><h3 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h3><details class="lake-collapse"><summary id="u37002ae8"><span class="ne-text">什么很多加了SSL的域名在crt.sh上查不到呢？企业是如何进行操作的？</span></summary><p id="u9090f498" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text">使用通配符、公共 CA 签发但禁用 CTlog（</span><span class="ne-text" style="color: rgb(44, 44, 54)">如DigiCert、Sectigo提供“私有证书”服务</span><span class="ne-text">)、私有证书。</span></p><p id="u2924aff8" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"></p><p id="u16e5899d" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">企业通常会根据安全策略和业务需求，采取以下做法：</span></p><p id="u6c3b6e0a" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><strong><span class="ne-text" style="color: rgb(44, 44, 54)">操作 说明</span></strong></p><p id="ueeecf5b2" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">✅</span><span class="ne-text" style="color: rgb(44, 44, 54)"> 使用私有CA</span></p><p id="ue5058efd" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">建立内部PKI体系，为内部系统签发证书，完全不依赖公共CT日志。</span></p><p id="u3ac7dade" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">✅</span><span class="ne-text" style="color: rgb(44, 44, 54)"> 使用云服务商托管证书</span></p><p id="ud8562d97" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">如阿里云SSL证书服务、AWS ACM、Google Cloud CAS，这些证书自动管理且不公开。</span></p><p id="u8e27cf78" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">✅</span><span class="ne-text" style="color: rgb(44, 44, 54)"> 选择“私有证书”选项</span></p><p id="ue6fe4b58" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">向DigiCert等CA申请时，选择不公开记录到CT日志。</span></p><p id="ueb055616" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">✅</span><span class="ne-text" style="color: rgb(44, 44, 54)"> 证书生命周期自动化</span></p><p id="u46fa8e02" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">使用ACME协议（如Let's Encrypt）自动签发，但Let's Encrypt证书会进入CT日志，因此不适合敏感域名。</span></p><p id="ued39bfb6" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">✅</span><span class="ne-text" style="color: rgb(44, 44, 54)"> 限制证书暴露</span></p><p id="u2142874e" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">敏感系统（如后台管理、API接口）使用内部DNS和私有证书，避免暴露在公网和crt.sh上。</span></p></details><details class="lake-collapse"><summary id="u709b2cfe"><span class="ne-text">什么是私有证书？</span></summary><p id="u472755d5" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><strong><span class="ne-text" style="color: rgb(143, 145, 168)">私有证书在“所有信任其根CA（根证书）的设备或系统”中生效，无论这些设备位于内网还是公网。</span></strong></p><p id="u6cf5cdb9" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><strong><span class="ne-text" style="color: rgb(143, 145, 168)"></span></strong></p><p id="u13403100" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">私有证书能否被信任，取决于：</span></p><p id="u3c5c986b" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><strong><span class="ne-text" style="color: rgb(143, 145, 168)">客户端（浏览器、App、服务器）是否安装并信任了该私有CA的根证书。</span></strong></p><h4 id="tTnHH" style="font-size: 16px; line-height: 24px; margin: 10px 0 5px 0"><span class="ne-text" style="color: rgb(44, 44, 54)">✅</span><span class="ne-text" style="color: rgb(44, 44, 54)"> 能成功访问的场景：</span></h4><ul class="ne-ul" style="margin: 0; padding-left: 23px"><li id="ub28f5241" data-lake-index-type="0"><span class="ne-text" style="color: rgb(44, 44, 54)">企业员工的电脑通过MDM（如飞书、钉钉）安装了企业根证书</span></li><li id="u61927b52" data-lake-index-type="0"><span class="ne-text" style="color: rgb(44, 44, 54)">设备访问部署在公网的</span><span class="ne-text" style="color: rgb(44, 44, 54)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(44, 44, 54); background-color: rgba(175, 184, 193, 0.2); font-size: 14px">https://api.company.com</span></code><span class="ne-text" style="color: rgb(44, 44, 54)">（使用私有证书）</span></li><li id="u96660afb" data-lake-index-type="0"><span class="ne-text" style="color: rgb(44, 44, 54)">因为设备信任根CA，所以连接显示“安全”</span></li></ul><h4 id="M6L7X" style="font-size: 16px; line-height: 24px; margin: 10px 0 5px 0"><span class="ne-text" style="color: rgb(44, 44, 54)">❌</span><span class="ne-text" style="color: rgb(44, 44, 54)"> 无法访问的场景：</span></h4><ul class="ne-ul" style="margin: 0; padding-left: 23px"><li id="u731eeba6" data-lake-index-type="0"><span class="ne-text" style="color: rgb(44, 44, 54)">普通用户用个人电脑访问同一个</span><span class="ne-text" style="color: rgb(44, 44, 54)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(44, 44, 54); background-color: rgba(175, 184, 193, 0.2); font-size: 14px">https://api.company.com</span></code></li><li id="uc2b354dd" data-lake-index-type="0"><span class="ne-text" style="color: rgb(44, 44, 54)">因为其设备未安装企业根证书，浏览器会提示“您的连接不是私密连接”</span></li></ul></details><h2 id="常规检查收集子域"><a href="#常规检查收集子域" class="headerlink" title="常规检查收集子域"></a>常规检查收集子域</h2><h3 id="域传送"><a href="#域传送" class="headerlink" title="域传送"></a>域传送</h3><h4 id="什么是域传送"><a href="#什么是域传送" class="headerlink" title="什么是域传送"></a>什么是域传送</h4><p>“域传送”通常指的是DNS区域传送（DNS Zone Transfer），这是一种在DNS服务器之间同步域名解析记录的机制，主要用于主从DNS服务器之间的数据复制。</p><p><strong>目的</strong>：确保多个DNS服务器拥有相同的区域数据，提高可用性和容错能力。</p><p><strong>简而言之，“域传送”就是把网站地址本从一个服务器复制到另一个服务器的过程，目的是备份和分担压力，但得管好权限，别让坏人偷看了。</strong></p><h4 id="工作方式"><a href="#工作方式" class="headerlink" title="工作方式"></a>工作方式</h4><ul><li><strong>AXFR（全量区域传送）</strong>：传输整个DNS区域的所有记录。通常在从服务器首次同步或区域数据发生重大变更时使用。</li><li><strong>IXFR（增量区域传送）</strong>：只传输自上次同步以来发生变化的部分记录。相比AXFR更高效，节省带宽和资源。</li></ul><p>当 DNS 服务器<strong>未正确配置访问控制</strong>，允许<strong>任意外部用户</strong>发起 AXFR 请求并获取整个 DNS 区域文件时，就形成了 <strong>DNS域传送漏洞</strong>。</p><h4 id="防御"><a href="#防御" class="headerlink" title="防御"></a>防御</h4><p>聪明的做法是： ✅ 只让你信任的朋友（指定服务器）来拿更新。<br>在相应的 zone、options 中添加 allow-transfer，对执行此操作的服务器进行限制。如：</p><p>严格限制允许进行区域传送的客户端的 IP</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">allow-transfer ｛1.1.1.1; 2.2.2.2;｝</span><br></pre></td></tr></table></figure><p>设置 TSIG key</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">allow-transfer ｛key &quot;dns1-slave1&quot;; key &quot;dns1-slave2&quot;;｝</span><br></pre></td></tr></table></figure><h3 id="站点配置文件-会暴露部分子域名"><a href="#站点配置文件-会暴露部分子域名" class="headerlink" title="站点配置文件(会暴露部分子域名)"></a>站点配置文件(会暴露部分子域名)</h3><ul><li>跨域策略文件crossdomain.xml， sitemap文件。</li><li>robots.txt</li></ul><h3 id="内容安全策略"><a href="#内容安全策略" class="headerlink" title="内容安全策略"></a>内容安全策略</h3><p>内容安全策略（CSP，Content Security Policy）是一种声明的安全机制，可以让网站运营者能够控制遵循CSP的用户代理（通常是浏览器）的行为。通过控制要启用哪些功能，以及从哪里下载内容，可以减少网站的攻击面。</p><p><strong>简而言之吗，网站为了安全，写了个“禁止名单”或“允许名单”（CSP），但一不小心把自己用的子域名都写进去了。别人一看这个名单，就知道有哪些子域名了。</strong></p><p>举个真实例子：</p><p>你访问一个网页，它返回的 HTTP 头里有这么一段：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Security-Policy: script-src &#x27;self&#x27; cdn.ygtech.com; img-src images.ygtech.com;</span><br></pre></td></tr></table></figure><p>这句话意思是：</p><ul><li>脚本只能从自己和 <code>cdn.ygtech.com</code> 加载</li><li>图片只能从 <code>images.ygtech.com</code> 加载</li></ul><p>👉 于是，你就发现了两个子域名：<code>cdn.ygtech.com</code> 和 <code>images.ygtech.com</code>！</p><h4 id="实现方法"><a href="#实现方法" class="headerlink" title="实现方法"></a>实现方法</h4><ol><li>手动抓包获取（HTTP header的Content-Security-Policy属性）</li><li>Python的Requests获取</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">res = requests.post(url=url, headers=headers, data=data, allow_redirects=False)</span><br><span class="line">if not res.headers[&#x27;Content-Security-Policy&#x27;]:</span><br><span class="line">print(&quot;There is no Content-Security-Policy in the header&quot;)</span><br><span class="line">else:</span><br><span class="line"># 处理主体代码</span><br></pre></td></tr></table></figure><h2 id="DNS-枚举-查询收集子域名"><a href="#DNS-枚举-查询收集子域名" class="headerlink" title="DNS 枚举&amp;查询收集子域名"></a>DNS 枚举&amp;查询收集子域名</h2><p>常见记录类型及其用途：</p><table><thead><tr><th><strong>记录</strong></th><th><strong>用途</strong></th><th><strong>信息价值</strong></th></tr></thead><tbody><tr><td><strong>A</strong></td><td>域名 → IPv4 地址</td><td>找真实 IP，判断是否在用</td></tr><tr><td><strong>AAAA</strong></td><td>域名 → IPv6 地址</td><td>同上，IPv6 环境</td></tr><tr><td><strong>CNAME</strong></td><td>别名记录（<code>cdn.example.com → aws.com</code>）</td><td>发现 CDN、云服务、潜在子域接管</td></tr><tr><td><strong>MX</strong></td><td>邮件服务器地址</td><td>找邮件系统，常指向 <code>mail.example.com</code></td></tr><tr><td><strong>NS</strong></td><td>域名服务器</td><td>找 DNS 服务商，判断是否有子域授权</td></tr><tr><td><strong>TXT</strong></td><td>文本信息</td><td>常用于 SPF（防钓鱼）、DKIM、证书验证，可能泄露内部信息</td></tr><tr><td><strong>SRV</strong></td><td>服务定位（如 <code>_sip._tcp</code>）</td><td>找 VoIP、LDAP、Kerberos 等内部服务</td></tr><tr><td><strong>PTR</strong></td><td>反向解析（IP → 域名）</td><td>从 IP 反查域名，用于资产拓线</td></tr></tbody></table><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dig A example.com</span><br><span class="line">dig CNAME www.example.com</span><br><span class="line">dig MX example.com</span><br><span class="line">dig TXT example.com</span><br><span class="line">dig NS example.com</span><br><span class="line">dig SRV _ldap._tcp.example.com</span><br></pre></td></tr></table></figure><p>示例：</p><p><img src="https://pub-4780fb9811854aaf95e3afc47620b25b.r2.dev/PicGo/1755401215436-80afab2a-a682-4c9b-ad6a-59c09d851fe5.png" alt="img"></p><h3 id="子域名爆破（暴力枚举）"><a href="#子域名爆破（暴力枚举）" class="headerlink" title="子域名爆破（暴力枚举）"></a>子域名爆破（暴力枚举）</h3><p>原理：</p><ul><li>使用常见子域名字典（如 <code>www</code>, <code>mail</code>, <code>admin</code>, <code>vpn</code>, <code>test</code>, <code>api</code>）</li><li>拼接成 <code>xxx.example.com</code></li><li>查询它的 <strong>A 或 CNAME 记录</strong></li><li>如果有响应，说明存在</li><li><code>gobuster dns -d example.com -w wordlist.txt</code></li></ul><h3 id="利用-DNS-区域传送（Zone-Transfer）漏洞"><a href="#利用-DNS-区域传送（Zone-Transfer）漏洞" class="headerlink" title="利用 DNS 区域传送（Zone Transfer）漏洞"></a>利用 DNS 区域传送（Zone Transfer）漏洞</h3><p>主从 DNS 之间需要同步数据，叫“区域传送”（AXFR）。如果配置错误，<strong>任何人都能请求传送，拿到整个域名的所有记录</strong>！</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dig axfr @ns1.example.com example.com</span><br></pre></td></tr></table></figure><h3 id="利用-NSEC-NSEC3-遍历（DNSSEC-Zone-Walking）"><a href="#利用-NSEC-NSEC3-遍历（DNSSEC-Zone-Walking）" class="headerlink" title="利用 NSEC&#x2F;NSEC3 遍历（DNSSEC Zone Walking）"></a>利用 NSEC&#x2F;NSEC3 遍历（DNSSEC Zone Walking）</h3><p>开启 DNSSEC 的域名用 NSEC 记录来“证明某个域名不存在”，但它会暴露“下一个存在的域名”。攻击者可以一步步“问”出所有子域名。</p><p>问：admin123.example.com 存在吗？ </p><p>答：不存在，下一个存在的是 dev.example.com</p><h4 id="防御："><a href="#防御：" class="headerlink" title="防御："></a>防御：</h4><p>使用 <strong>NSEC3</strong>（哈希混淆顺序），防止遍历。</p><h3 id="SRV-枚举与-NSEC-遍历-方式对比"><a href="#SRV-枚举与-NSEC-遍历-方式对比" class="headerlink" title="SRV 枚举与 NSEC 遍历 方式对比"></a>SRV 枚举与 NSEC 遍历 方式对比</h3><table><thead><tr><th><strong>特性</strong></th><th><strong>SRV 记录枚举</strong></th><th><strong>NSEC Zone Walking</strong></th></tr></thead><tbody><tr><td><strong>前提条件</strong></td><td>目标域配置了相关服务的 SRV 记录</td><td>目标域启用 DNSSEC 且使用 NSEC (非 NSEC3)</td></tr><tr><td><strong>发现范围</strong></td><td>仅限于提供特定服务的子域名</td><td>理论上可以发现域内的所有子域名</td></tr><tr><td><strong>方法</strong></td><td>查询已知的常见 SRV 记录名称</td><td>利用 NSEC 记录的链式结构进行遍历</td></tr><tr><td><strong>工具</strong></td><td><code>dnsrecon</code>, <code>sublist3r</code>, 手动 <code>dig</code></td><td><code>ldns-walk</code>, <code>dnsrecon</code> (支持 DNSSEC 枚举), 手动 <code>dig</code></td></tr><tr><td><strong>有效性</strong></td><td>依赖于服务配置</td><td>依赖于 DNSSEC 配置 (NSEC vs NSEC3)</td></tr></tbody></table><h3 id="被动查询第三方数据库（不接触目标，隐蔽）"><a href="#被动查询第三方数据库（不接触目标，隐蔽）" class="headerlink" title="被动查询第三方数据库（不接触目标，隐蔽）"></a>被动查询第三方数据库（不接触目标，隐蔽）</h3><h4 id="常用平台"><a href="#常用平台" class="headerlink" title="常用平台"></a>常用平台</h4><table><thead><tr><th><strong>网站</strong></th><th><strong>特点</strong></th></tr></thead><tbody><tr><td>crt.sh</td><td>查证书，获取 HTTPS 子域名</td></tr><tr><td>DNSdumpster.com</td><td>可视化强，查 A&#x2F;CNAME&#x2F;MX 等</td></tr><tr><td>SecurityTrails</td><td>历史记录丰富，支持 API</td></tr><tr><td>VirusTotal</td><td>查域名，看“Relations”</td></tr><tr><td>Hackertarget.com</td><td>免费在线工具</td></tr></tbody></table><h2 id="搜索引擎收集子域"><a href="#搜索引擎收集子域" class="headerlink" title="搜索引擎收集子域"></a>搜索引擎收集子域</h2><h3 id="搜索引擎的原理："><a href="#搜索引擎的原理：" class="headerlink" title="搜索引擎的原理："></a>搜索引擎的原理：</h3><p><strong>爬取、索引、检索和排序</strong>。其目标是快速、准确地从海量互联网信息中找到用户需要的内容。</p><p>搜索引擎就像个超级勤奋的图书管理员，派小机器人到处翻网页、做笔记，然后根据你搜的词，从笔记里找出最相关的结果。而“子域名”呢，它要么是顺着链接爬过去的，要么是别人提到的，要么是网站自己报上来的。</p><p><strong>注意每个搜索引擎每个平台的结果可能都不一致的，所以在搜集资产时多个平台同时使用较好。</strong></p><p><a href="https://ght.se7ensec.cn/"><strong>https://ght.se7ensec.cn/</strong></a></p><p><a href="https://www.exploit-db.com/google-hacking-database"><strong>https://www.exploit-db.com/google-hacking-database</strong></a></p><p><a href="https://dorks.faisalahmed.me/"><strong>https://dorks.faisalahmed.me/</strong></a></p><h2 id="威胁情报、空间汇测平台收集子域"><a href="#威胁情报、空间汇测平台收集子域" class="headerlink" title="威胁情报、空间汇测平台收集子域"></a>威胁情报、空间汇测平台收集子域</h2><p>原理：主动扫描全网设备，记录 IP、域名、端口、服务等。</p><p>平台有 FOFA、hunter、Shodan 等等。</p><h2 id="代码托管平台搜索（GitHub、GitLab、Gitee）"><a href="#代码托管平台搜索（GitHub、GitLab、Gitee）" class="headerlink" title="代码托管平台搜索（GitHub、GitLab、Gitee）"></a>代码托管平台搜索（GitHub、GitLab、Gitee）</h2><ul><li><p><strong>原理</strong>：<br>开发者可能不小心把配置文件、API 地址、内部域名上传到公开仓库。</p></li><li><p><strong>常见泄露文件</strong>：</p></li><li><p><code>config.js</code>、<code>docker-compose.yml</code>、<code>nginx.conf</code></p></li><li><p><code>crossdomain.xml</code>、<code>robots.txt</code>、<code>sitemap.xml</code></p></li><li><p><strong>搜索关键词</strong>：</p></li><li><p><code>&quot;example.com&quot; password</code></p></li><li><p><code>&quot;api.*.example.com&quot;</code></p></li><li><p><code>filename:config domain</code></p></li><li><p><strong>工具</strong>：</p></li><li><p>GitHub 搜索 + 高级语法</p></li><li><p><code>TruffleHog</code>（扫描历史提交中的密钥和域名）</p></li><li><p><code>GitRob</code></p></li></ul><h2 id="ASN-IP-段反查"><a href="#ASN-IP-段反查" class="headerlink" title="ASN &#x2F; IP 段反查"></a>ASN &#x2F; IP 段反查</h2><p>ASN&#x2F;IP段反查的原理是：先找到目标所属的“网络身份证”（ASN），再查这个“身份证”下管理的所有IP地址段，最后通过反向DNS或空间测绘，找出这些IP上托管的所有域名。这种方法非常靠谱，尤其适合大企业资产发现。</p><ul><li><p><strong>原理</strong>：</p></li><li><p>先查 <code>example.com</code> 的 IP</p></li><li><p>再查这个 IP 属于哪个 AS 号（自治系统号）</p></li><li><p>然后查这个 AS 号下所有 IP 段</p></li><li><p>最后反查这些 IP 段对应的域名（反向 DNS）</p></li><li><p><strong>工具</strong>：</p></li><li><p><code>bgp.he.net</code>（查 ASN）</p></li><li><p><code>nmap --script targets-asn</code>（批量生成 IP 列表）</p></li><li><p><code>Fofa</code> 搜 <code>asn=&quot;AS12345&quot;</code></p></li><li><p><strong>适用场景</strong>：大型企业，IP 资产多。</p></li></ul><p>你想收集“阿里云”相关的所有资产：</p><ol><li>查 <code>aliyun.com</code> → IP：<code>112.124.15.1</code></li><li>查IP归属 → ASN：<code>AS45102</code>（阿里云）</li><li>查 <code>AS45102</code> 下所有IP段（成千上万个）</li><li>用 FOFA 搜：<code>asn=&quot;AS45102&quot; &amp;&amp; domain~&quot;ali&quot;</code></li><li>结果：</li></ol><ul><li><code>ecs.aliyun.com</code></li><li><code>oss-cn-beijing.aliyuncs.com</code></li><li><code>slb.aliyuncs.com</code></li><li><code>yundun.com</code></li><li><code>alidns.com</code></li><li>…… 数百个子域名和关联资产</li></ul><p>🎯 这就是 <strong>ASN反查的强大之处</strong>：<strong>从一个点，扩展出整个组织的数字资产地图</strong>。</p><h2 id="域名备案、Whois-查询和反查"><a href="#域名备案、Whois-查询和反查" class="headerlink" title="域名备案、Whois 查询和反查"></a>域名备案、Whois 查询和反查</h2><p>在对一些大型的目标进行信息搜集时，还可以通过查找域名备案信息来发现同备案的其他域名资产。如搜集qq的子域名时，最常见的即为对qq.com进行子域名搜集，此时就会遗漏其余顶级域名资产。</p><p>WHOIS是一个公共数据库系统，用来查询“谁注册了某个域名”或“谁拥有某个IP地址段”。</p><p><a href="https://beian.miit.gov.cn/">https://beian.miit.gov.cn/</a> （公司名）</p><p><a href="https://beian.mps.gov.cn/#/query/webSearch">https://beian.mps.gov.cn/#/query/webSearch</a></p><p><a href="https://whois.chinaz.com/">https://whois.chinaz.com/</a></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><details class="lake-collapse"><summary id="u37baff1d"><span class="ne-text">什么是证书透明度日志？</span></summary><p id="u40906db0" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">把互联网上的网站（比如 </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(44, 44, 54); background-color: rgba(175, 184, 193, 0.2); font-size: 14px">baidu.com</span></code><span class="ne-text" style="color: rgb(44, 44, 54)">）想象成一个个商店。为了让顾客安全地访问，这些商店需要一个“安全营业执照”——这就是我们说的 </span><strong><span class="ne-text" style="color: rgb(44, 44, 54)">SSL/TLS 证书</span></strong><span class="ne-text" style="color: rgb(44, 44, 54)">。</span></p><p id="uf345b808" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">为了防止有人偷偷开个假店（比如 </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(44, 44, 54); background-color: rgba(175, 184, 193, 0.2); font-size: 14px">fake-baidu.com</span></code><span class="ne-text" style="color: rgb(44, 44, 54)">）国际上规定：</span><span class="ne-text" style="color: rgb(143, 145, 168)">所有正规颁发的“营业执照”（证书），都必须登记在一个或多个</span><strong><span class="ne-text" style="color: rgb(143, 145, 168)">公开的登记本</span></strong><span class="ne-text" style="color: rgb(143, 145, 168)">里，谁都可以查！</span></p><p id="udf714893" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">这个“公开的登记本”，就是 </span><strong><span class="ne-text" style="color: rgb(44, 44, 54)">证书透明度日志（Certificate Transparency Log，简称 CT Log）</span></strong><span class="ne-text" style="color: rgb(44, 44, 54)">。</span></p></details><details class="lake-collapse"><summary id="u147d31b3"><span class="ne-text">证书透明度收集子域名的原理是什么？</span></summary><p id="ua4290993" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">每当百度给 </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(44, 44, 54); background-color: rgba(175, 184, 193, 0.2)">map.baidu.com</span></code><span class="ne-text" style="color: rgb(44, 44, 54)"> 这个地图服务申请一个“安全执照”时，就必须把这个证书写进公开的“登记本”里。</span><span class="ne-text" style="color: rgb(143, 145, 168)">证书透明度就像是一个“证书公开花名册”，我们通过翻这个花名册，就能知道一个公司（网站）底下有多少个“小部门”（子域），哪怕它们平时藏得很深。</span></p></details><details class="lake-collapse"><summary id="u40b138a2"><span class="ne-text">什么很多加了SSL的域名在crt.sh上查不到呢？企业是如何进行操作的？</span></summary><p id="u1f8bc5aa" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text">使用通配符、公共 CA 签发但禁用 CTlog（</span><span class="ne-text" style="color: rgb(44, 44, 54)">如DigiCert、Sectigo提供“私有证书”服务</span><span class="ne-text">)、私有证书。</span></p><p id="uf3ae1b65" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"></p><p id="uda49db7d" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">企业通常会根据安全策略和业务需求，采取以下做法：</span></p><p id="u0c0e66b6" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><strong><span class="ne-text" style="color: rgb(44, 44, 54)">操作 说明</span></strong></p><p id="ufffd994a" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">✅</span><span class="ne-text" style="color: rgb(44, 44, 54)"> 使用私有CA</span></p><p id="u26afe9e7" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">建立内部PKI体系，为内部系统签发证书，完全不依赖公共CT日志。</span></p><p id="u8f54da5f" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">✅</span><span class="ne-text" style="color: rgb(44, 44, 54)"> 使用云服务商托管证书</span></p><p id="uc5f6d112" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">如阿里云SSL证书服务、AWS ACM、Google Cloud CAS，这些证书自动管理且不公开。</span></p><p id="uedbf0086" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">✅</span><span class="ne-text" style="color: rgb(44, 44, 54)"> 选择“私有证书”选项</span></p><p id="u71ace4bd" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">向DigiCert等CA申请时，选择不公开记录到CT日志。</span></p><p id="uac68c238" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">✅</span><span class="ne-text" style="color: rgb(44, 44, 54)"> 证书生命周期自动化</span></p><p id="u106ae12e" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">使用ACME协议（如Let's Encrypt）自动签发，但Let's Encrypt证书会进入CT日志，因此不适合敏感域名。</span></p><p id="u588cb288" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">✅</span><span class="ne-text" style="color: rgb(44, 44, 54)"> 限制证书暴露</span></p><p id="ud715ecbd" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">敏感系统（如后台管理、API接口）使用内部DNS和私有证书，避免暴露在公网和crt.sh上。</span></p></details><details class="lake-collapse"><summary id="uf91a486c"><span class="ne-text">什么是私有证书？</span></summary><p id="u3f5092c9" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><strong><span class="ne-text" style="color: rgb(143, 145, 168)">私有证书在“所有信任其根CA（根证书）的设备或系统”中生效，无论这些设备位于内网还是公网。</span></strong></p><p id="u73494656" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><strong><span class="ne-text" style="color: rgb(143, 145, 168)"></span></strong></p><p id="u072f4dab" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">私有证书能否被信任，取决于：</span></p><p id="ub2dacc4f" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><strong><span class="ne-text" style="color: rgb(143, 145, 168)">客户端（浏览器、App、服务器）是否安装并信任了该私有CA的根证书。</span></strong></p><h4 id="j8gOr" style="font-size: 16px; line-height: 24px; margin: 10px 0 5px 0"><span class="ne-text" style="color: rgb(44, 44, 54)">✅</span><span class="ne-text" style="color: rgb(44, 44, 54)"> 能成功访问的场景：</span></h4><ul class="ne-ul" style="margin: 0; padding-left: 23px"><li id="ub7c6fdba" data-lake-index-type="0"><span class="ne-text" style="color: rgb(44, 44, 54)">企业员工的电脑通过MDM（如飞书、钉钉）安装了企业根证书</span></li><li id="u0dadba5d" data-lake-index-type="0"><span class="ne-text" style="color: rgb(44, 44, 54)">设备访问部署在公网的</span><span class="ne-text" style="color: rgb(44, 44, 54)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(44, 44, 54); background-color: rgba(175, 184, 193, 0.2); font-size: 14px">https://api.company.com</span></code><span class="ne-text" style="color: rgb(44, 44, 54)">（使用私有证书）</span></li><li id="ucf3bff8c" data-lake-index-type="0"><span class="ne-text" style="color: rgb(44, 44, 54)">因为设备信任根CA，所以连接显示“安全”</span></li></ul><h4 id="IOkcW" style="font-size: 16px; line-height: 24px; margin: 10px 0 5px 0"><span class="ne-text" style="color: rgb(44, 44, 54)">❌</span><span class="ne-text" style="color: rgb(44, 44, 54)"> 无法访问的场景：</span></h4><ul class="ne-ul" style="margin: 0; padding-left: 23px"><li id="u1aafa278" data-lake-index-type="0"><span class="ne-text" style="color: rgb(44, 44, 54)">普通用户用个人电脑访问同一个</span><span class="ne-text" style="color: rgb(44, 44, 54)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(44, 44, 54); background-color: rgba(175, 184, 193, 0.2); font-size: 14px">https://api.company.com</span></code></li><li id="u92e84473" data-lake-index-type="0"><span class="ne-text" style="color: rgb(44, 44, 54)">因为其设备未安装企业根证书，浏览器会提示“您的连接不是私密连接”</span></li></ul></details><details class="lake-collapse"><summary id="u1a07a06d"><span class="ne-text">什么是域传送？域传送漏洞的原理是？如何防御域传送漏洞？</span></summary><p id="ua8fb7331" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">DNS区域传送（DNS Zone Transfer），这是一种在DNS服务器之间同步域名解析记录的机制，主要用于主从DNS服务器之间的数据复制。</span></p><p id="u316c1e35" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">原理：</span><strong><span class="ne-text" style="color: rgb(44, 44, 54)">DNS服务器错误地允许任意外部用户或未授权的客户端发起区域传送请求（AXFR），从而泄露整个域名的完整解析记录</span></strong><span class="ne-text" style="color: rgb(44, 44, 54)">。</span></p><p id="udbb6068f" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">防御主要是最小权限原则，限制</span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(44, 44, 54); background-color: rgba(175, 184, 193, 0.2); font-size: 14px">allow-transfer</span></code><span class="ne-text" style="color: rgb(44, 44, 54)"> + 使用TSIG认证。</span></p></details><details class="lake-collapse"><summary id="ub84b68cd"><span class="ne-text">什么是内容安全策略？为什么内容安全策略可以搜集子域名？</span></summary><p id="u7c1b1465" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text">内容安全策略（CSP，Content Security Policy）是一种声明的安全机制，可以让网站运营者能够控制遵循CSP的用户代理（通常是浏览器）的行为。通过控制要启用哪些功能，以及从哪里下载内容，可以减少网站的攻击面。</span></p><p id="u668b7a45" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><strong><span class="ne-text" style="color: rgb(143, 145, 168)">简而言之吗，网站为了安全，写了个“禁止名单”或“允许名单”（CSP），但一不小心把自己用的子域名都写进去了。别人一看这个名单，就知道有哪些子域名了。</span></strong></p></details><details class="lake-collapse"><summary id="u9c40dffa"><span class="ne-text">子域名爆破的原理是什么？</span></summary><p id="u01a53a01" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text">爆破的原理其实是通过枚举的方式来实现的，通过不断的拼接字典中的内容去枚举域名的A记录，但是该方法一般需要解决泛解析问题。</span></p><p id="uccd33c55" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text">dns 协议查询</span></p><ul class="ne-ul" style="margin: 0; padding-left: 23px"><li id="u4dcd0f4c" data-lake-index-type="0"><span class="ne-text" style="color: rgb(44, 44, 54)">“</span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(44, 44, 54); background-color: rgba(175, 184, 193, 0.2); font-size: 14px">dev.example.com</span></code><span class="ne-text" style="color: rgb(44, 44, 54)"> </span><span class="ne-text" style="color: rgb(44, 44, 54)">的 A 记录是什么？”</span></li><li id="u024718f9" data-lake-index-type="0"><span class="ne-text" style="color: rgb(44, 44, 54)">如果存在，返回 IP</span></li></ul></details><details class="lake-collapse"><summary id="uf080b700"><span class="ne-text">什么是泛解析？如何解决泛解析？</span></summary><p id="u31c80d2b" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><strong><span class="ne-text" style="color: rgb(143, 145, 168)">泛解析（Wildcard DNS）</span></strong><span class="ne-text" style="color: rgb(143, 145, 168)"> 是指 DNS 服务器配置了一条通配符记录（如 </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(143, 145, 168); background-color: rgba(175, 184, 193, 0.2); font-size: 14px">*.example.com</span></code><span class="ne-text" style="color: rgb(143, 145, 168)">），使得</span><strong><span class="ne-text" style="color: rgb(143, 145, 168)">任何不存在的子域名都会被解析到一个默认的 IP 地址</span></strong><span class="ne-text" style="color: rgb(143, 145, 168)">。</span></p><pre data-language="plain" id="SHzQR" class="ne-codeblock language-plain" style="border: 1px solid #e8e8e8; border-radius: 2px; background: #f9f9f9; padding: 16px; font-size: 13px; color: #595959"><code>*.example.com  IN  A  192.0.2.100</code></pre><ul class="ne-ul" style="margin: 0; padding-left: 23px"><li id="ued2f8c04" data-lake-index-type="0"><span class="ne-text" style="color: rgb(44, 44, 54)">✅</span><span class="ne-text" style="color: rgb(44, 44, 54)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(44, 44, 54); background-color: rgba(175, 184, 193, 0.2); font-size: 14px">mail.example.com</span></code><span class="ne-text" style="color: rgb(44, 44, 54)"> </span><span class="ne-text" style="color: rgb(44, 44, 54)">→</span><span class="ne-text" style="color: rgb(44, 44, 54)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(44, 44, 54); background-color: rgba(175, 184, 193, 0.2); font-size: 14px">192.0.2.10</span></code><span class="ne-text" style="color: rgb(44, 44, 54)">（真实存在）</span></li><li id="u956bba95" data-lake-index-type="0"><span class="ne-text" style="color: rgb(44, 44, 54)">✅</span><span class="ne-text" style="color: rgb(44, 44, 54)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(44, 44, 54); background-color: rgba(175, 184, 193, 0.2); font-size: 14px">www.example.com</span></code><span class="ne-text" style="color: rgb(44, 44, 54)"> </span><span class="ne-text" style="color: rgb(44, 44, 54)">→</span><span class="ne-text" style="color: rgb(44, 44, 54)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(44, 44, 54); background-color: rgba(175, 184, 193, 0.2); font-size: 14px">192.0.2.20</span></code><span class="ne-text" style="color: rgb(44, 44, 54)">（真实存在）</span></li><li id="ucf6d8281" data-lake-index-type="0"><span class="ne-text" style="color: rgb(44, 44, 54)">❌</span><span class="ne-text" style="color: rgb(44, 44, 54)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(44, 44, 54); background-color: rgba(175, 184, 193, 0.2); font-size: 14px">xyz123.example.com</span></code><span class="ne-text" style="color: rgb(44, 44, 54)"> </span><span class="ne-text" style="color: rgb(44, 44, 54)">→</span><span class="ne-text" style="color: rgb(44, 44, 54)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(44, 44, 54); background-color: rgba(175, 184, 193, 0.2); font-size: 14px">192.0.2.100</span></code><span class="ne-text" style="color: rgb(44, 44, 54)">（</span><strong><span class="ne-text" style="color: rgb(44, 44, 54)">不存在，但被泛解析了！</span></strong><span class="ne-text" style="color: rgb(44, 44, 54)">）</span></li><li id="u0e600a5a" data-lake-index-type="0"><span class="ne-text" style="color: rgb(44, 44, 54)">❌</span><span class="ne-text" style="color: rgb(44, 44, 54)"> </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(44, 44, 54); background-color: rgba(175, 184, 193, 0.2); font-size: 14px">aaaa.example.com</span></code><span class="ne-text" style="color: rgb(44, 44, 54)"> → </span><code class="ne-code" style="font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace; background-color: rgba(0, 0, 0, 0.06); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 2px; padding: 0px 2px"><span class="ne-text" style="color: rgb(44, 44, 54); background-color: rgba(175, 184, 193, 0.2); font-size: 14px">192.0.2.100</span></code><span class="ne-text" style="color: rgb(44, 44, 54)">（同上）</span></li></ul><p id="u1d689f95" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)"></span></p><p id="uf630a226" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><span class="ne-text" style="color: rgb(44, 44, 54)">发送两个</span><strong><span class="ne-text" style="color: rgb(44, 44, 54)">完全随机的子域名</span></strong><span class="ne-text" style="color: rgb(44, 44, 54)">查询，如果都返回相同 IP → 泛解析。</span><span class="ne-text">然后随机生成域名查询，记录 IP 和 TTL，IP 出现频率高，IIP 相同且泛解析的 TTL 也相同（</span><span class="ne-text" style="color: rgb(44, 44, 54)">真实子域名的 TTL 不同）</span><span class="ne-text">，则加入黑名单</span><strong><span class="ne-text" style="color: rgb(143, 145, 168)">泛解析规则列表</span></strong><span class="ne-text">，最后可以再加上响应内容，进行相似度对比。</span></p></details><p>参考文章：</p><p><a href="https://security.tencent.com/index.php/blog/msg/161">红蓝对抗之域名搜集方法总结 - 安全动态 - 腾讯安全应急响应中心</a></p><p><a href="https://teamssix.com/191206-172901">【漏洞复现】DNS域传送漏洞 | TeamsSix</a></p><p><a href="https://github.com/vulhub/vulhub/blob/master/dns/dns-zone-transfer/README.zh-cn.md">vulhub&#x2F;dns&#x2F;dns-zone-transfer&#x2F;README.zh-cn.md at master · vulhub&#x2F;vulhub</a></p><p><a href="https://www.k0rz3n.com/2020/08/08/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E4%B8%AD%E7%9A%84DNS%E5%88%86%E6%9E%90/">网络安全中的DNS分析</a></p>]]></content>
      
      
      <categories>
          
          <category> WEB安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WEB安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>利用HTTP请求格式绕过WAF技术解析</title>
      <link href="/posts/7de6854f.html"/>
      <url>/posts/7de6854f.html</url>
      
        <content type="html"><![CDATA[<p>记录从HTTP协议层面绕过WAF的技术，不断总结，活到老学到老~</p><span id="more"></span><h2 id="POST请求中的Content-Type差异"><a href="#POST请求中的Content-Type差异" class="headerlink" title="POST请求中的Content-Type差异"></a>POST请求中的Content-Type差异</h2><h3 id="application-x-www-form-urlencoded"><a href="#application-x-www-form-urlencoded" class="headerlink" title="application&#x2F;x-www-form-urlencoded"></a>application&#x2F;x-www-form-urlencoded</h3><p>默认的表单上传格式。</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">username</span>=admin&amp;password=<span class="number">123456</span></span><br></pre></td></tr></table></figure><h3 id="multipart-form-data"><a href="#multipart-form-data" class="headerlink" title="multipart&#x2F;form-data"></a>multipart&#x2F;form-data</h3><p>在文件上传时，由于文件中可能有各种各样的字符，与常见POST请求参数中的&amp;&#x3D;引起冲突，这时引出了一种特有的上传的POST Content-Type格式——multipart&#x2F;form-data。</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">POST</span> <span class="string">/upload</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>multipart/form-data; boundary=----WebKitBoundary</span><br><span class="line"></span><br><span class="line"><span class="language-php">------WebKitBoundary</span></span><br><span class="line"><span class="language-php">Content-Disposition: form-data; name=<span class="string">&quot;username&quot;</span></span></span><br><span class="line"><span class="language-php"></span></span><br><span class="line"><span class="language-php">admin</span></span><br><span class="line"><span class="language-php">------WebKitBoundary</span></span><br><span class="line"><span class="language-php">Content-Disposition: form-data; name=<span class="string">&quot;file&quot;</span>; filename=<span class="string">&quot;shell.php&quot;</span></span></span><br><span class="line"><span class="language-php">Content-Type: application/x-php</span></span><br><span class="line"><span class="language-php"></span></span><br><span class="line"><span class="language-php"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">system</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;cmd&#x27;</span>]); <span class="meta">?&gt;</span></span></span><br><span class="line"><span class="language-php">------WebKitBoundary--</span></span><br></pre></td></tr></table></figure><p>Content-Type: multipart&#x2F;form-data; boundary&#x3D;—-WebKitBoundary。这里的分界线为—-WebKitBoundary，作用是将上传内容和POST参数数据互不干扰。</p><p>两个分界线之间的内容，有些是POST 数据，有些是上传文件，<strong>区分主要在于是否有“filename&#x3D;”字样。</strong></p><p>如何将标准POST请求转换为multipart&#x2F;form-data格式提交呢？Burp的右键方便的提供这个功能，点击Change boby encoding，就可以实现了。</p><img src="https://pub-4780fb9811854aaf95e3afc47620b25b.r2.dev/PicGo/image-20250529175739765.png" alt="image-20250529175739765" style="zoom:67%;" /><p>转换后如图。</p><img src="https://pub-4780fb9811854aaf95e3afc47620b25b.r2.dev/PicGo/image-20250529175847534.png" alt="image-20250529175847534" style="zoom:67%;" /><p>利用其绕过WAF解析：</p><ol><li><p>部分 WAF 默认优先检测 <code>application/x-www-form-urlencoded</code> 或 <code>JSON</code> 请求，但对 <code>multipart/form-data</code> 的解析不完善（如未正确提取字段名和值）。</p></li><li><p>利用 <code>Content-Disposition</code> 的额外属性（如 <code>filename=</code>）干扰 WAF 的正则匹配。</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--boundary</span></span><br><span class="line">Content-Disposition: form-data; <span class="type">name</span>=&quot;user&quot;; filename=&quot;a.txt&quot;</span><br><span class="line">Content-<span class="keyword">Type</span>: <span class="type">text</span>/plain</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27; OR 1=1 --</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">这里 filename 可能误导 WAF 认为这是一个文件字段而非SQL 注入。</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="分块传输"><a href="#分块传输" class="headerlink" title="分块传输"></a>分块传输</h2><p><strong>Transfer-Encoding: chunked</strong> 是 HTTP&#x2F;1.1 中定义的一种 <strong>数据传输机制</strong>，允许服务端&#x2F;客户端分段（Chunk）发送数据，<strong>不需要预先知道整体内容的长度</strong>（即无需设置 <code>Content-Length</code>）。</p><p>看视频时，往往是边观看边下载的，这时候HTTP响应就是用的分块传输的形式，先发送一部分数据到服务器，然后再发送后续的内容，这种形式被称为chunked。</p><p>特点：</p><ul><li>HTTP2.0提供了比分块传输更有效的数据流机制，并禁止使用标头。（HTTP2.0不支持使用HTTP标头的分块传输）</li><li>chunked分块可以一次性发送，也可以切分多次后发送</li><li>增加了头部 Transfer-Encoding: chunked，另外16进制声明长度。</li></ul><p>可以使用这个插件构造分块传输：</p><p><a href="http://github.com/c0ny1/chunked-coding-converter">http://github.com/c0ny1/chunked-coding-converter</a></p><p><strong>思考</strong>：如果有一个注入可以分块绕过，但是需要拿数据手工很麻烦，怎么办？SQLMAP怎么使用分块传输啊？</p><p>答：可以使用插件自带的代理功能。</p><p>可参考文章：<a href="https://mp.weixin.qq.com/s/pM1ULCqNdQwSB7hcltrbtw">https://mp.weixin.qq.com/s/pM1ULCqNdQwSB7hcltrbtw</a></p><img src="https://pub-4780fb9811854aaf95e3afc47620b25b.r2.dev/PicGo/image-20250529212316705.png" alt="image-20250529212316705" style="zoom: 67%;" />]]></content>
      
      
      <categories>
          
          <category> WEB安全 </category>
          
          <category> WAF绕过 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WEB安全 </tag>
            
            <tag> WAF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Web URL 路由解析机制详解</title>
      <link href="/posts/dde44b6c.html"/>
      <url>/posts/dde44b6c.html</url>
      
        <content type="html"><![CDATA[<p>在重塑自己的安全技能时，发现自己对Web URL 路由解析机制还是有些模糊，因此探究学习一番。</p><span id="more"></span><p>常见的Web URL 路由解析机制总结如下。</p><h2 id="基于文件目录"><a href="#基于文件目录" class="headerlink" title="基于文件目录"></a>基于文件目录</h2><ul><li><p><strong>原理</strong>：URL 路径直接映射服务器物理文件路径。</p></li><li><p><strong>区分</strong>：</p><ul><li>&#x2F;admin&#x2F;  表示访问的是 admin 目录，会访问 admin 目录下的索引文件。</li><li>&#x2F;admin   表示访问的是 admin 文件，如果没有这个文件，就返回 404。</li></ul></li><li><p><strong>适用场景</strong>：静态网站、传统 PHP&#x2F;HTML 项目。</p></li><li><p><strong>局限</strong>：灵活性低，难以处理动态逻辑或隐藏实际文件路径。安全性低，容易暴露目录结构。</p></li></ul><h2 id="基于路由"><a href="#基于路由" class="headerlink" title="基于路由"></a>基于路由</h2><ul><li><p><strong>原理</strong>：URL 路径由框架的路由机制解析，映射到处理函数或控制器，与物理路径无关。</p></li><li><p><strong>两种子类型：</strong></p><ul><li><p>后端路由（  如 Express (Node.js), Django (Python), Spring MVC (Java), Laravel (PHP)  ）</p><ul><li><p><strong>特点</strong>：服务器端渲染 (SSR) 或 API 接口，处理业务逻辑，返回 HTML&#x2F;JSON&#x2F;XML。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//api.example.com/users/123</span></span><br><span class="line">-&gt;  </span><br><span class="line">Express<span class="selector-class">.js</span> </span><br><span class="line">app<span class="selector-class">.get</span>(<span class="string">&#x27;/users/:id&#x27;</span>, userController.getUser)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>前端路由（ React Router, Vue Router, Angular Router。 ）：</p><ul><li><p><strong>特点</strong>：单页应用 (SPA) 核心，无刷新切换视图，URL 与 UI 状态同步。</p></li><li><p><strong>模式</strong>：Hash 模式 (<code>#/profile</code>), History 模式 (<code>/profile</code>)。</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//app.example.com/profile </span></span><br><span class="line">-&gt; </span><br><span class="line">React Router </span><br><span class="line">&lt;Route path=<span class="string">&quot;/profile&quot;</span> element=&#123;&lt;ProfilePage/&gt;&#125;&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p><strong>适用场景</strong>：动态网站、Web 应用、API 服务、SPA。</p></li></ul><h2 id="混合模式"><a href="#混合模式" class="headerlink" title="混合模式"></a>混合模式</h2><ul><li><p><strong>原理</strong>：结合文件目录约定和路由定义，通常用于全栈框架，实现“约定优于配置”。文件位置自动映射为路由。</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Next.js (React)：</span><br><span class="line"></span><br><span class="line">/<span class="function"><span class="title">pages</span>/index.js -&gt;</span> /</span><br><span class="line"></span><br><span class="line">/<span class="function"><span class="title">pages</span>/about.js -&gt;</span> /about</span><br><span class="line"></span><br><span class="line">/<span class="function"><span class="title">pages</span>/api/<span class="keyword">data</span>.js -&gt;</span> /api/<span class="keyword">data</span> (API路由)</span><br><span class="line"></span><br><span class="line">/<span class="function"><span class="title">pages</span>/blog/[slug].js -&gt;</span> /blog/hello-world (动态路由)</span><br></pre></td></tr></table></figure></li><li><p><strong>适用场景</strong>：需要快速开发、兼顾前后端逻辑、支持多种渲染模式（SSR, SSG, CSR）的现代 Web 应用。</p></li></ul><p>​<mark class="tag-plugin colorful mark" color="red">思考</mark>：访问 <a href="http://www.baidu.com/index.php">www.baidu.com/index.php</a> 成功就可以断定百度是 php 写的吗？所以百度的首页是 idnex.php 吗？</p><p>​不是的，百度后端只是绑定 index.php 路由到某个返回结果上，不能访问 index.php 成功就认为这个文件存在。所见非真！</p><h2 id="虚拟路径"><a href="#虚拟路径" class="headerlink" title="虚拟路径"></a>虚拟路径</h2><ul><li><p><strong>原理</strong>：URL 路径是“虚构”的，不代表真实文件位置。服务器端逻辑根据路径参数动态生成或获取资源。</p></li><li><p><strong>URL 示例</strong>：</p><ul><li><strong>网易云音乐</strong>：<code>https://music.163.com/song/media/outer/url?id=1867217766.mp3</code> (服务器根据 <code>id</code> 从数据库&#x2F;CDN 获取音频流)</li><li><strong>YouTube 视频</strong>：<code>https://www.youtube.com/watch?v=dQw4w9WgXcQ</code> (服务器根据 <code>v</code> 参数查找视频流)</li><li><strong>动态图片生成</strong>：<code>https://example.com/chart?type=bar&amp;data=[1,2,3]</code> (服务器动态生成图表图片)</li></ul></li><li><p><strong>适用场景</strong>：媒体流服务（音乐&#x2F;视频）、动态生成内容（图表、报告）、需要权限控制的资源、CDN 入口、短链接服务、API 网关路由。</p></li></ul><h2 id="RESTful-API-资源"><a href="#RESTful-API-资源" class="headerlink" title="RESTful API 资源"></a>RESTful API 资源</h2><ul><li><p><strong>原理</strong>：URL 代表资源本身，HTTP 方法 (GET, POST, PUT, DELETE) 代表对资源的操作。URL 结构通常设计为名词复数形式。</p></li><li><p><strong>URL 示例</strong>：</p><ul><li><code>GET /api/users</code> - 获取用户列表</li><li><code>GET /api/users/123</code> - 获取 ID 为 123 的用户</li><li><code>POST /api/users</code> - 创建新用户</li><li><code>PUT /api/users/123</code> - 更新用户 123</li><li><code>DELETE /api/users/123</code> - 删除用户 123</li></ul></li><li><p><strong>适用场景</strong>：构建 Web API 服务，供前端或其他系统消费数据。是现代前后端分离架构的核心。</p></li></ul><h2 id="GraphQL-单一端点"><a href="#GraphQL-单一端点" class="headerlink" title="GraphQL 单一端点"></a>GraphQL 单一端点</h2><ul><li><p><strong>原理</strong>：所有请求都发送到同一个端点 (通常是 <code>/graphql</code>)。客户端通过查询语句精确指定需要的数据结构和字段。</p></li><li><p><strong>请求示例</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">请求：</span><br><span class="line"></span><br><span class="line">POST /graphql</span><br><span class="line">&#123;</span><br><span class="line">  query: `</span><br><span class="line">    query &#123;</span><br><span class="line">      user(id: &quot;123&quot;) &#123;</span><br><span class="line">        name</span><br><span class="line">        email</span><br><span class="line">        posts(limit: 5) &#123;</span><br><span class="line">          title</span><br><span class="line">          createdAt</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  `</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">响应：</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;data&quot;: &#123;</span><br><span class="line">    &quot;user&quot;: &#123;</span><br><span class="line">      &quot;name&quot;: &quot;Alice&quot;,</span><br><span class="line">      &quot;email&quot;: &quot;alice@example.com&quot;,</span><br><span class="line">      &quot;posts&quot;: [</span><br><span class="line">        &#123;&quot;title&quot;: &quot;First Post&quot;, &quot;createdAt&quot;: &quot;2023-10-25&quot;&#125;,</span><br><span class="line">        ...</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> WEB安全 </category>
          
          <category> 基础知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WEB安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>stellar博客主题配置及踩坑记录</title>
      <link href="/posts/48181fae.html"/>
      <url>/posts/48181fae.html</url>
      
        <content type="html"><![CDATA[<p>捣鼓了一下博客，记录了一些配置踩坑记录~</p><span id="more"></span><h2 id="HEXO-命令"><a href="#HEXO-命令" class="headerlink" title="HEXO 命令"></a>HEXO 命令</h2><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> <span class="string">&quot;My New Post&quot;</span></span><br><span class="line">hexo clean</span><br><span class="line">hexo <span class="keyword">generate</span></span><br><span class="line">hexo server</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><h2 id="stellar-理念"><a href="#stellar-理念" class="headerlink" title="stellar 理念"></a>stellar 理念</h2><p><strong>真正的简约远不止删繁就简，而是在纷繁中建立秩序。</strong></p><p><strong>降低视觉密度</strong></p><p><strong>提高有效信息优先级</strong></p><p><strong>删掉无效信息</strong></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">打开终端并进入博客文件夹，执行：</span><br><span class="line">npm i hexo-theme-stellar</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">在 blog<span class="symbol">/_config.yml</span> 文件中找到并修改：</span><br><span class="line"><span class="params">theme:</span> stellar</span><br></pre></td></tr></table></figure><h2 id="文章类型"><a href="#文章类型" class="headerlink" title="文章类型"></a>文章类型</h2><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">tech:</span> 默认技术类文章, <span class="params">story:</span> 图文类文章（文字和段落间增距大）</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">blog<span class="symbol">/_config.stellar.yml</span></span><br><span class="line"><span class="params">article:</span></span><br><span class="line">  <span class="params">type:</span> tech <span class="comment"># tech/story</span></span><br></pre></td></tr></table></figure><h2 id="站点信息配置"><a href="#站点信息配置" class="headerlink" title="站点信息配置"></a>站点信息配置</h2><p>_config.yml</p><h2 id="主题配置文件"><a href="#主题配置文件" class="headerlink" title="主题配置文件"></a>主题配置文件</h2><p>在博客根目录的 <code>_config.yml</code> 文件旁边新建一个文件： <code>_config.stellar.yml</code> ，在这个文件中的配置信息优先级高于主题文件夹中的配置文件。将主题的配置文件复制到根目录下</p><h2 id="自动生成封面"><a href="#自动生成封面" class="headerlink" title="自动生成封面"></a>自动生成封面</h2><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">blog<span class="symbol">/_config.stellar.yml</span></span><br><span class="line"><span class="params">article:</span></span><br><span class="line">  <span class="params">auto_cover:</span> <span class="literal">true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="引用外部图片"><a href="#引用外部图片" class="headerlink" title="引用外部图片"></a>引用外部图片</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">在文章的</span> <span class="string">front-matter</span> <span class="string">中写上</span> <span class="attr">cover:</span> <span class="string">xxx</span> <span class="string">即可。例如：</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># 本地图片路径为 blog/source/assets/xaoxuu/blog/2020-0927a@1x.svg</span></span><br><span class="line"><span class="comment"># 也可以直接引用图片直链 https://xxx.jpg</span></span><br><span class="line"><span class="attr">cover:</span> <span class="string">/assets/xaoxuu/blog/2020-0927a@1x.svg</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><h2 id="自动生成摘要"><a href="#自动生成摘要" class="headerlink" title="自动生成摘要"></a>自动生成摘要</h2><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">blog<span class="symbol">/_config.stellar.yml</span></span><br><span class="line"></span><br><span class="line"><span class="params">article:</span></span><br><span class="line">  <span class="params">auto_excerpt:</span> <span class="number">200</span></span><br></pre></td></tr></table></figure><h2 id="Font"><a href="#Font" class="headerlink" title="Font"></a>Font</h2><p><a href="https://github.com/xaoxuu/hexo-theme-stellar-examples/blob/main/blog/_config.stellar.yml">https://github.com/xaoxuu/hexo-theme-stellar-examples/blob/main/blog/_config.stellar.yml</a></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">    - &lt;link <span class="attribute">rel</span>=<span class="string">&quot;apple-touch-icon&quot;</span> <span class="attribute">sizes</span>=<span class="string">&quot;180x180&quot;</span> <span class="attribute">href</span>=<span class="string">&quot;/assets/xaoxuu/favicon/apple-touch-icon.png&quot;</span>&gt;</span><br><span class="line">    - &lt;link <span class="attribute">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attribute">type</span>=<span class="string">&quot;image/png&quot;</span> <span class="attribute">sizes</span>=<span class="string">&quot;32x32&quot;</span> <span class="attribute">href</span>=<span class="string">&quot;/assets/xaoxuu/favicon/favicon-32x32.png&quot;</span>&gt;</span><br><span class="line">    - &lt;link <span class="attribute">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attribute">type</span>=<span class="string">&quot;image/png&quot;</span> <span class="attribute">sizes</span>=<span class="string">&quot;16x16&quot;</span> <span class="attribute">href</span>=<span class="string">&quot;/assets/xaoxuu/favicon/favicon-16x16.png&quot;</span>&gt;</span><br><span class="line">    - &lt;link <span class="attribute">rel</span>=<span class="string">&quot;manifest&quot;</span> <span class="attribute">href</span>=<span class="string">&quot;/assets/xaoxuu/favicon/site.webmanifest&quot;</span>&gt;</span><br><span class="line">    - &lt;link <span class="attribute">rel</span>=<span class="string">&quot;shortcut icon&quot;</span> <span class="attribute">href</span>=<span class="string">&quot;/assets/xaoxuu/favicon/favicon.ico&quot;</span>&gt;</span><br><span class="line">    - &lt;meta <span class="attribute">name</span>=<span class="string">&quot;theme-color&quot;</span> <span class="attribute">content</span>=<span class="string">&quot;#f8f8f8&quot;</span>&gt;</span><br><span class="line">    - &lt;link <span class="attribute">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attribute">href</span>=<span class="string">&quot;https://cdn.bootcdn.net/ajax/libs/lxgw-wenkai-screen-webfont/1.7.0/style.min.css&quot;</span> <span class="attribute">media</span>=<span class="string">&quot;all&quot;</span> /&gt;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">style:</span><br><span class="line">  text-align: justify</span><br><span class="line">  smooth_scroll: <span class="literal">false</span></span><br><span class="line">  codeblock:</span><br><span class="line">    scrollbar: 0px</span><br><span class="line">  font-size:</span><br><span class="line">    body: 1rem</span><br><span class="line">  font-family:</span><br><span class="line">    logo: <span class="string">&#x27;&quot;LXGW WenKai Screen&quot;, system-ui, &quot;Microsoft Yahei&quot;, &quot;Segoe UI&quot;, -apple-system, Roboto, Ubuntu, &quot;Helvetica Neue&quot;, Arial, &quot;WenQuanYi Micro Hei&quot;, sans-serif&#x27;</span></span><br><span class="line">    body: <span class="string">&#x27;&quot;LXGW WenKai Screen&quot;, system-ui, &quot;Microsoft Yahei&quot;, &quot;Segoe UI&quot;, -apple-system, Roboto, Ubuntu, &quot;Helvetica Neue&quot;, Arial, &quot;WenQuanYi Micro Hei&quot;, sans-serif&#x27;</span></span><br><span class="line">    code: <span class="string">&#x27;&quot;LXGW WenKai Screen&quot;, Menlo, Monaco, Consolas, system-ui, &quot;Courier New&quot;, monospace, sans-serif&#x27;</span></span><br><span class="line">    codeblock: <span class="string">&#x27;Menlo, Monaco, Consolas, system-ui, &quot;Courier New&quot;, monospace, sans-serif&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="文章模板"><a href="#文章模板" class="headerlink" title="文章模板"></a>文章模板</h2><p>根目录下 <code>scaffolds</code> 文件夹中编辑 <code>post.md</code> 的 <code>font-matter</code> ，根据自己的需要增加你想要配置的内容</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># 基本信息</span></span><br><span class="line"><span class="attr">title:</span> &#123;&#123; <span class="string">title</span> &#125;&#125;</span><br><span class="line"><span class="attr">date:</span> &#123;&#123; <span class="string">date</span> &#125;&#125;</span><br><span class="line"><span class="attr">tags:</span> []</span><br><span class="line"><span class="attr">categories:</span> []</span><br><span class="line"><span class="attr">description:</span> <span class="comment"># excerpt 也可 </span></span><br><span class="line"><span class="comment"># 封面</span></span><br><span class="line"><span class="attr">cover:</span> </span><br><span class="line"><span class="attr">banner:</span> </span><br><span class="line"><span class="attr">poster:</span> <span class="comment"># 海报（可选，全图封面卡片）</span></span><br><span class="line">  <span class="attr">topic:</span> <span class="string">标题上方的小字</span> <span class="comment"># 可选</span></span><br><span class="line">  <span class="attr">headline:</span> <span class="string">大标题</span> <span class="comment"># 必选</span></span><br><span class="line">  <span class="attr">caption:</span> <span class="string">标题下方的小字</span> <span class="comment"># 可选</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">标题颜色</span> <span class="comment"># 可选</span></span><br><span class="line"><span class="comment"># 插件</span></span><br><span class="line"><span class="attr">sticky:</span> <span class="comment"># 数字越大越靠前</span></span><br><span class="line"><span class="attr">mermaid:</span></span><br><span class="line"><span class="attr">katex:</span> </span><br><span class="line"><span class="attr">mathjax:</span> </span><br><span class="line"><span class="comment"># 可选</span></span><br><span class="line"><span class="attr">topic:</span> <span class="comment"># 专栏 id</span></span><br><span class="line"><span class="attr">author:</span> </span><br><span class="line"><span class="attr">references:</span></span><br><span class="line"><span class="attr">comments:</span> <span class="comment"># 设置 false 禁止评论</span></span><br><span class="line"><span class="attr">indexing:</span> <span class="comment"># 设置 false 避免被搜索</span></span><br><span class="line"><span class="attr">breadcrumb:</span> <span class="comment"># 设置 false 隐藏面包屑导航</span></span><br><span class="line"><span class="attr">leftbar:</span> </span><br><span class="line"><span class="attr">rightbar:</span></span><br><span class="line"><span class="attr">h1:</span> <span class="comment"># 设置为 &#x27;&#x27; 隐藏标题</span></span><br><span class="line"><span class="attr">type:</span> <span class="comment"># tech/story</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>文章如果有分类和标签就会自动在主页出现「分类」、「标签」选项卡实现分类浏览，不需要手动添加页面。</p><h2 id="文章页"><a href="#文章页" class="headerlink" title="文章页"></a>文章页</h2><h3 id="横幅图片"><a href="#横幅图片" class="headerlink" title="横幅图片"></a>横幅图片</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">blog<span class="keyword">/source/</span>_posts/xxx.md</span><br><span class="line"><span class="symbol">banner:</span> <span class="keyword">/assets/</span>xaoxuu<span class="keyword">/blog/</span><span class="number">2020</span><span class="number">-0927</span>a@<span class="number">1</span>x.svg</span><br></pre></td></tr></table></figure><h3 id="指定一级标题"><a href="#指定一级标题" class="headerlink" title="指定一级标题"></a>指定一级标题</h3><p>默认的一级标题是文章的 <code>title</code>，如果希望使用别的文字作为一级标题，可以指定 <code>h1</code>，例如：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">blog/source/_posts/xxx.md</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">h1:</span> <span class="string">快速开始</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br></pre></td></tr></table></figure><h2 id="文章分类"><a href="#文章分类" class="headerlink" title="文章分类"></a>文章分类</h2><p>文章如果有分类和标签就会自动在主页出现「分类」、「标签」选项卡实现分类浏览，不需要手动添加页面。</p><p>在文章列表页面会显示文章所属的第一级分类，例如：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">blog/source/_posts/xxx.md</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">categories:</span> [<span class="string">设计开发</span>, <span class="string">iOS开发</span>]</span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>这样写就只会显示「设计开发」一级分类，而在文章页面顶部则会显示完整的面包屑导航。</p><h2 id="更多独立页面"><a href="#更多独立页面" class="headerlink" title="更多独立页面"></a>更多独立页面</h2><p>为了能够正确进行导航栏高亮，引入了 <code>menu_id</code> 来进行区分，可以在 <code>front-matter</code> 中指定 <code>menu_id</code> 来使某个菜单按钮处于选中状态。</p><p>例如您有关于、友链两个页面，都希望高亮「更多」按钮：</p><p>blog&#x2F;source&#x2F;about&#x2F;index.md</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">menu_id:</span> <span class="string">more</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">关于</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br></pre></td></tr></table></figure><p>blog&#x2F;source&#x2F;friends&#x2F;index.md</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">menu_id:</span> <span class="string">more</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">友链</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br></pre></td></tr></table></figure><p>blog&#x2F;_config.stellar.yml</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">menubar:</span></span><br><span class="line">  <span class="params">columns:</span> <span class="number">4</span> <span class="comment"># 一行多少个</span></span><br><span class="line">  <span class="params">items:</span> <span class="comment"># 可按照自己需求增加，符合以下格式即可</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="operator">-</span> <span class="params">id:</span> more</span><br><span class="line">      <span class="params">theme:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="string">      title: 更多</span></span><br><span class="line"><span class="string">      icon: &#x27;&#x27;</span></span><br><span class="line">      <span class="params">url:</span> <span class="operator">/</span>more<span class="symbol">/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="组件库"><a href="#组件库" class="headerlink" title="组件库"></a>组件库</h2><p>文章&#x2F;文档的目录树组件，显示文章和文档的目录结构：</p><p>在 <code>wiki</code> 板块显示的是最近更新的 <code>wiki</code> 页面，其余地方显示最近更新的文章。</p><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">toc:</span></span><br><span class="line">  <span class="params">layout:</span> toc</span><br><span class="line">  <span class="params">list_number:</span> <span class="literal">false</span> <span class="comment"># 是否显示序号</span></span><br><span class="line">  <span class="params">min_depth:</span> <span class="number">2</span> <span class="comment"># 建议不要低于 2 即从 H2 标签开始解析（H1标签用于文章大标题）</span></span><br><span class="line">  <span class="params">max_depth:</span> <span class="number">5</span> <span class="comment"># 5 代表最多解析到 H5 标签</span></span><br><span class="line">  <span class="params">fallback:</span> recent <span class="comment"># Use a backup widget when toc does not exist.</span></span><br><span class="line">  <span class="params">collapse:</span> <span class="literal">false</span> <span class="comment"># true / false / auto (始终折叠/不折叠/自动折叠)</span></span><br><span class="line"></span><br><span class="line"><span class="params">recent:</span></span><br><span class="line">  <span class="params">layout:</span> recent</span><br><span class="line">  <span class="params">rss:</span> <span class="comment"># /atom.xml # npm i hexo-generator-feed</span></span><br><span class="line">  <span class="params">limit:</span> <span class="number">5</span> <span class="comment"># Count of posts</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="侧边栏设置"><a href="#侧边栏设置" class="headerlink" title="侧边栏设置"></a>侧边栏设置</h2><p>logo:<br>  subtitle: ‘’ # ‘文字 1 | 文字 2’ (鼠标放上去会切换到文字 2)</p><h2 id="Navbar（主导航栏）"><a href="#Navbar（主导航栏）" class="headerlink" title="Navbar（主导航栏）"></a>Navbar（主导航栏）</h2><p>自己可以增加任意的键值对，键：就是 menu_id，后面需要用到，值：就是显示的 md 链接，方括号内支持文字和图片标签</p><h2 id="侧边栏欢迎语"><a href="#侧边栏欢迎语" class="headerlink" title="侧边栏欢迎语"></a>侧边栏欢迎语</h2><ol><li><p>在主题文件目录下的_data&#x2F;widgets.yml 文件中新增一项侧边栏配置，写下你的网站欢迎语.</p></li><li><p>可以引用开放接口，如【今日诗词】.</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">welcome:</span><br><span class="line">    layout: markdown</span><br><span class="line">    title: <span class="string">&#x27;🎉 欢迎 &#x27;</span></span><br><span class="line">    content: |</span><br><span class="line">        本站托管于 Github, 可能会出现加载缓慢或丢失问题，欢迎在评论区交流技术知识。</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span> </span><span class="language-xml"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        今日诗词:  </span><span class="language-xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;jinrishici-sentence&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">        </span><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://sdk.jinrishici.com/v2/browser/jinrishici.js&quot;</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><ol start="3"><li>修改主题配置_config.stellar.yml，设置欢迎语出现的具体位置</li></ol><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">widgets:</span><br><span class="line">  #### 自动生成的页面 ####</span><br><span class="line">  # 主页</span><br><span class="line">  home: search, welcome, recent, tagcloud, timeline # for home</span><br></pre></td></tr></table></figure></li></ol><h2 id="永久链接软件"><a href="#永久链接软件" class="headerlink" title="永久链接软件"></a>永久链接软件</h2><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-abbrlink <span class="comment">--save</span></span><br></pre></td></tr></table></figure><h2 id="标签颜色"><a href="#标签颜色" class="headerlink" title="标签颜色"></a>标签颜色</h2><p>配置文件</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">article:</span><br><span class="line">    category_color:</span><br><span class="line">      <span class="string">&#x27;探索号&#x27;</span>: <span class="string">&#x27;#f44336&#x27;</span></span><br><span class="line">      <span class="meta"># <span class="string">&quot;博客搭建&quot;</span>: <span class="string">&quot;#4CB9E7&quot;</span></span></span><br><span class="line">      <span class="meta"># <span class="string">&quot;Hexo&quot;</span>: <span class="string">&quot;#FF004D&quot;</span></span></span><br><span class="line">      <span class="meta"># <span class="string">&quot;ChatGPT&quot;</span>: <span class="string">&quot;#43766C&quot;</span></span></span><br><span class="line">      <span class="meta"># <span class="string">&quot;绘画&quot;</span>: <span class="string">&quot;#11009E&quot;</span></span></span><br><span class="line">      <span class="meta"># <span class="string">&quot;前端&quot;</span>: <span class="string">&quot;#F08A5D&quot;</span></span></span><br></pre></td></tr></table></figure><p>本站由 @<a href="/"><strong>{author.name}</strong></a> 使用 <a href="%7Btheme.tree%7D">{theme.name} {theme.version}</a> 主题创建。</p><h2 id="底部"><a href="#底部" class="headerlink" title="底部"></a>底部</h2><p>配置文件的 style 里的 content</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">content: | # 支持 Markdown 格式</span><br><span class="line">  <span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line">    本站由 @<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span>&#123;author.name&#125;<span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span> 使用 </span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;theme.tree&#125;&quot;</span>&gt;</span>&#123;theme.name&#125; &#123;theme.version&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span> 主题创建。</span><br><span class="line">  <span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">show_runtime</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">window</span>.<span class="built_in">setTimeout</span>(<span class="string">&quot;show_runtime()&quot;</span>, <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript">      X = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;2025/03/25 00:00:00 &quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      Y = <span class="keyword">new</span> <span class="title class_">Date</span>();</span></span><br><span class="line"><span class="language-javascript">      T = (Y.<span class="title function_">getTime</span>() - X.<span class="title function_">getTime</span>());</span></span><br><span class="line"><span class="language-javascript">      M = <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>;</span></span><br><span class="line"><span class="language-javascript">      a = T / M;</span></span><br><span class="line"><span class="language-javascript">      A = <span class="title class_">Math</span>.<span class="title function_">floor</span>(a);</span></span><br><span class="line"><span class="language-javascript">      b = (a - A) * <span class="number">24</span>;</span></span><br><span class="line"><span class="language-javascript">      B = <span class="title class_">Math</span>.<span class="title function_">floor</span>(b);</span></span><br><span class="line"><span class="language-javascript">      c = (b - B) * <span class="number">60</span>;</span></span><br><span class="line"><span class="language-javascript">      C = <span class="title class_">Math</span>.<span class="title function_">floor</span>((b - B) * <span class="number">60</span>);</span></span><br><span class="line"><span class="language-javascript">      D = <span class="title class_">Math</span>.<span class="title function_">floor</span>((c - C) * <span class="number">60</span>);</span></span><br><span class="line"><span class="language-javascript">      runtime_span.<span class="property">innerHTML</span> = <span class="string">&quot;🌱 营业 &quot;</span> + A + <span class="string">&quot;天-&quot;</span> + B + <span class="string">&quot;小时-&quot;</span> + C + <span class="string">&quot;分-&quot;</span> + D + <span class="string">&quot;秒 🛞&quot;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">show_runtime</span>();</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;runtime_span&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="WIKI"><a href="#WIKI" class="headerlink" title="WIKI"></a>WIKI</h2><p><a href="https://xaoxuu.com/wiki/stellar/wiki-settings/">https://xaoxuu.com/wiki/stellar/wiki-settings/</a></p><p>新建 blog&#x2F;source&#x2F;_data&#x2F;，并新建 wiki 文件夹，在 wiki 下新建自己的项目文件夹。</p><p>_data 下面的 wiki 是用来做配置的，不是放文件的。</p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">blog/source/_data/wiki/项目名.yml</span></span><br><span class="line"><span class="attribute"></span></span><br><span class="line"><span class="attribute">name</span><span class="punctuation">:</span> <span class="string">WebSec</span></span><br><span class="line"><span class="attribute">title</span><span class="punctuation">:</span> <span class="string">Web安全</span></span><br><span class="line"><span class="attribute">subtitle</span><span class="punctuation">:</span> <span class="string">&#x27;Web安全 | 没有绝对安全的系统&#x27;</span></span><br><span class="line"><span class="comment"># tags:</span></span><br><span class="line"><span class="comment"># icon: /assets/wiki/stellar/icon.svg</span></span><br><span class="line"><span class="comment"># cover: /assets/wiki/stellar/icon.svg</span></span><br><span class="line"><span class="attribute">description</span><span class="punctuation">:</span> <span class="string">对于Web安全漏洞原理及挖掘手法进行总结，以便于自己查阅。</span></span><br><span class="line"><span class="comment"># repo: xaoxuu/hexo-theme-stellar</span></span><br><span class="line"><span class="attribute">search</span><span class="punctuation">:</span></span><br><span class="line">  <span class="attribute">filter</span><span class="punctuation">:</span> <span class="string">/wiki/WebSec/</span></span><br><span class="line">  <span class="attribute">placeholder</span><span class="punctuation">:</span> <span class="string">在 WebSec中搜索...</span></span><br><span class="line"><span class="attribute">leftbar</span><span class="punctuation">: </span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">tree</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">timeline_stellar_releases</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">related</span></span><br><span class="line"><span class="comment"># comment_title: &#x27;评论区仅供交流，有问题请提 [issue](https://github.com/xaoxuu/hexo-theme-stellar/issues) 反馈。&#x27;</span></span><br><span class="line"><span class="comment"># comments:</span></span><br><span class="line"><span class="comment">#   service: giscus</span></span><br><span class="line"><span class="comment">#   giscus:</span></span><br><span class="line"><span class="comment">#     data-repo: xaoxuu/hexo-theme-stellar</span></span><br><span class="line"><span class="comment">#     data-mapping: number</span></span><br><span class="line"><span class="comment">#     data-term: 226</span></span><br><span class="line"><span class="attribute">base_dir</span><span class="punctuation">:</span> <span class="string">/wiki/WebSec/</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">tree</span><span class="punctuation">:</span></span><br><span class="line">  <span class="attribute">&#x27;开始&#x27;</span><span class="punctuation">:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">API测试</span></span><br><span class="line">    <span class="comment"># - releases</span></span><br><span class="line">  <span class="comment"># &#x27;使用&#x27;:</span></span><br><span class="line">  <span class="comment">#   - bbb</span></span><br><span class="line">  <span class="comment">#   - pages</span></span><br><span class="line">  <span class="comment">#   - sidebar</span></span><br><span class="line">  <span class="comment">#   - tag-plugins</span></span><br><span class="line">  <span class="comment">#   - tag-plugins/express</span></span><br><span class="line">  <span class="comment">#   - tag-plugins/data</span></span><br><span class="line">  <span class="comment">#   - tag-plugins/container</span></span><br><span class="line">  <span class="comment">#   - comments</span></span><br><span class="line">  <span class="comment"># &#x27;文档系统&#x27;:</span></span><br><span class="line">  <span class="comment">#   - wiki-settings</span></span><br><span class="line">  <span class="comment"># &#x27;进阶玩法&#x27;:</span></span><br><span class="line">  <span class="comment">#   - widgets</span></span><br><span class="line">  <span class="comment">#   - advanced-settings</span></span><br><span class="line">  <span class="comment">#   - notes</span></span><br><span class="line">  <span class="comment">#   - fcircle</span></span><br><span class="line">  <span class="comment"># &#x27;技术支持&#x27;:</span></span><br><span class="line">  <span class="comment">#   - articles</span></span><br><span class="line">  <span class="comment">#   - todo</span></span><br><span class="line">  <span class="comment">#   - contributors</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在此文档项目的 <code>md</code> 文件的 <code>front-matter</code> 部分指定所属的项目名（即上一步创建的文件名 <code>项目名.yml</code>）</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">wiki:</span> <span class="string">id</span> <span class="comment"># 这是项目id，对应 /data/wiki/id.yml</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">这是分页标题</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br></pre></td></tr></table></figure><p>在 <code>blog/source/_data/</code> 文件夹中创建一个 <code>wiki.yml</code> 文件，在其中写入需要显示的项目 <code>id</code>：</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">- </span>id</span><br><span class="line"><span class="bullet">- </span>其它项目</span><br></pre></td></tr></table></figure><h2 id="NOTE"><a href="#NOTE" class="headerlink" title="NOTE"></a>NOTE</h2><p><a href="https://xaoxuu.com/wiki/stellar/wiki-settings/notes.html">https://xaoxuu.com/wiki/stellar/wiki-settings/notes.html</a></p><h2 id="OKR-目标管理"><a href="#OKR-目标管理" class="headerlink" title="OKR 目标管理"></a>OKR 目标管理</h2><p><a href="https://xaoxuu.com/wiki/stellar/tag-plugins/express/#okr-%E7%9B%AE%E6%A0%87%E7%AE%A1%E7%90%86">https://xaoxuu.com/wiki/stellar/tag-plugins/express/#okr-%E7%9B%AE%E6%A0%87%E7%AE%A1%E7%90%86</a></p><h2 id="背景颜色"><a href="#背景颜色" class="headerlink" title="背景颜色"></a>背景颜色</h2><p>blog&#x2F;_config.stellar.yml 文件中，</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">style:  </span><br><span class="line">  leftbar:</span><br><span class="line">    # 可以设置：纯色/渐变色/图片作为背景</span><br><span class="line">    # <span class="attribute">background</span>: <span class="built_in">var</span>(--leftbar-bg)</span><br><span class="line">    <span class="attribute">background-image</span>: url(<span class="string">https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.13/image/sidebar-bg1@small.jpg</span>)</span><br><span class="line">    <span class="attribute">blur-px</span>: <span class="number">100px</span></span><br><span class="line">    <span class="attribute">blur-bg</span>: <span class="built_in">var</span>(--alpha60)</span><br></pre></td></tr></table></figure><p>该网站有很多好看的颜色，复制修改即可。(<a href="https://webgradients.com/">https://webgradients.com/</a>)</p><h2 id="recent"><a href="#recent" class="headerlink" title="recent"></a>recent</h2><p>在小王随笔页面我不希望有 recent，在 data&#x2F;widgets.yaml 中将 recent 组件置空，自己新建一个组件</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">recent:</span><br><span class="line">  # layout: recent</span><br><span class="line">  # rss: # /atom.xml # npm i hexo-generator-feed</span><br><span class="line">  # limit: <span class="number">5</span> # Count <span class="keyword">of</span> posts</span><br><span class="line"></span><br><span class="line">my_recent:</span><br><span class="line">  layout: recent</span><br><span class="line">    # rss: # /atom.xml # npm i hexo-generator-feed</span><br><span class="line">  limit: <span class="number">5</span> # Count <span class="keyword">of</span> posts</span><br></pre></td></tr></table></figure><p>并在配置文件中修改，在需要的位置添加 my_recent 组件。</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">site_tree:</span></span><br><span class="line"><span class="symbol">home:</span></span><br><span class="line"><span class="symbol">    leftbar:</span> welcome, recent, my_recent</span><br></pre></td></tr></table></figure><h2 id="网易云音乐组件"><a href="#网易云音乐组件" class="headerlink" title="网易云音乐组件"></a>网易云音乐组件</h2><p>去网易云找到歌曲 id，例如：<a href="https://music.163.com/#/song?id">https://music.163.com/#/song?id</a> &#x3D; 524152312</p><p>在 mardown 中写入   <div class="tag-plugin audio">  <audio controls preload>  <source src="524152312" type="audio/mp3">Your browser does not support the audio tag.  </audio>  </div>  </p><p>就可以了，参考 <a href="https://m3ng9e.github.io/notes/">此页面</a> 的网易云音乐组件就是这样写的。</p><h2 id="表达类标签自动补齐"><a href="#表达类标签自动补齐" class="headerlink" title="表达类标签自动补齐"></a>表达类标签自动补齐</h2><p>参考文章：</p><p><a href="https://blog.hzchu.top/2024/%E4%BD%BF%E7%94%A8Typora-plugin%E5%A2%9E%E5%BC%BAStellar%E5%86%99%E4%BD%9C%E4%BD%93%E9%AA%8C/">https://blog.hzchu.top/2024/%E4%BD%BF%E7%94%A8Typora-plugin%E5%A2%9E%E5%BC%BAStellar%E5%86%99%E4%BD%9C%E4%BD%93%E9%AA%8C/</a></p><h2 id="hexo草稿"><a href="#hexo草稿" class="headerlink" title="hexo草稿"></a>hexo草稿</h2><p>参考文章：</p><p><a href="https://hexo.io/zh-cn/docs/writing">https://hexo.io/zh-cn/docs/writing</a></p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">新建：</span><br><span class="line">hexo <span class="keyword">new</span> draft <span class="symbol">&lt;title&gt;</span></span><br><span class="line"></span><br><span class="line">使用此布局初始化的帖子将被保存到 <span class="keyword">source</span>/_drafts 文件夹中。 </span><br><span class="line">您可以使用 publish 命令将草稿移动到 <span class="keyword">source</span>/_posts 文件夹。</span><br><span class="line"></span><br><span class="line">预览：</span><br><span class="line">hexo S --draft</span><br><span class="line"></span><br><span class="line">发布：</span><br><span class="line">hexo publish <span class="symbol">&lt;title&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Blog </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Blog </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
